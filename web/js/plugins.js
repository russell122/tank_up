"use strict";var $plugins={};function noop(){}function _createModalFooter(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(0===t.length)return document.createElement("div");var n=document.createElement("div");return n.classList.add("vmodal__footer"),t.forEach(function(t){var e=document.createElement(t.tag||"button");"a"===t.tag&&e.setAttribute("href",t.link),e.innerHTML=t.text,e.classList.add("".concat(t.class||"g-btn")),e.onclick=t.handler||noop,n.appendChild(e)}),n}function _createModal(t){var e=document.createElement("div");return e.classList.add("vmodal"),e.insertAdjacentHTML("afterbegin",'\n\t\t<div class="vmodal__overlay">\n\t\t\t<div class="vmodal__window" style="max-width: '.concat(t.width||"600px",'">\n\t\t\t\t<div class="vmodal__header">\n\t\t\t\t\t<span class="vmodal__title" data-title=\'true\'>').concat(t.title||"Модальное окно","</span>\n\t\t\t\t\t").concat(t.closable?'<span class="vmodal__close" data-close="true">&times;</span>':"",'\n\t\t\t\t</div>\n\t\t\t\t<div class="vmodal__body" data-content="true">\n\t\t\t\t\t').concat(t.content||"","\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t")),_createModalFooter(t.footerButtons).appendAfter(e.querySelector("[data-content]")),document.body.appendChild(e),e}window.$plugins=$plugins,Element.prototype.appendAfter=function(t){t.parentNode.insertBefore(this,t.nextSibling)},$plugins.modal=function(t){function e(t){(t.target.dataset.close||t.target.classList.contains("vmodal__overlay"))&&(s.close(),setTimeout(function(){return s.destroy()},1e3))}function n(t){"Escape"==t.key&&(s.close(),setTimeout(function(){return s.destroy()},1e3))}var o=_createModal(t),a=!1,d=!1,s={open:function(){if(d)return console.log("destroyed true");a||o.classList.add("open"),a||document.body.classList.add("show-modal")},close:function(){a=!0,o.classList.remove("open"),o.classList.add("hide"),document.body.classList.remove("show-modal"),setTimeout(function(){o.classList.remove("hide"),a=!1},200)}};return o.addEventListener("click",e),document.addEventListener("keydown",n),Object.assign(s,{destroy:function(){o.parentNode.removeChild(o),o.removeEventListener("click",e),o.removeEventListener("click",n),d=!0},setContent:function(t,e){t=0<arguments.length&&void 0!==t?t:"Модальное окно",e=1<arguments.length?e:void 0;o.querySelector("[data-title]").innerHTML=t,o.querySelector("[data-content]").innerHTML=e}})};